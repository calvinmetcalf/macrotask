{"version":3,"file":null,"sources":["../node_modules/rollup-plugin-node-globals/src/global.js","../node_modules/rollup-plugin-node-globals/src/browser.js","../lib/async/setImmediate.js","../lib/async/postMessage.js","../lib/async/messageChannel.js","../lib/async/stateChange.js","../lib/async/timeout.js","../lib/nextTick.js","../lib/item.js","../lib/list.js","../lib/index.js"],"sourcesContent":["export default typeof global !== \"undefined\" ? global :\n            typeof self !== \"undefined\" ? self :\n            typeof window !== \"undefined\" ? window : {}\n","export var browser = true;\n","export const test = () => !process.browser && global && typeof global.setImmediate === 'function';\n\nexport const install = func => () => global.setImmediate(func);\n","// The test against `importScripts` prevents this implementation from being installed inside a web worker,\n// where `global.postMessage` means something completely different and can't be used for this purpose.\n\nexport function test() {\n  if (!global.postMessage || global.importScripts) {\n    return false;\n  }\n  if (global.setImmediate) {\n    // we can only get here in IE10\n    // which doesn't handel postMessage well\n    return false;\n  }\n  var postMessageIsAsynchronous = true;\n  var oldOnMessage = global.onmessage;\n  global.onmessage = function () {\n    postMessageIsAsynchronous = false;\n  };\n  global.postMessage('', '*');\n  global.onmessage = oldOnMessage;\n\n  return postMessageIsAsynchronous;\n};\n\nexport function install (func) {\n  var codeWord = 'com.calvinmetcalf.setImmediate' + Math.random();\n  function globalMessage(event) {\n    if (event.source === global && event.data === codeWord) {\n      func();\n    }\n  }\n  if (global.addEventListener) {\n    global.addEventListener('message', globalMessage, false);\n  } else {\n    global.attachEvent('onmessage', globalMessage);\n  }\n  return function () {\n    global.postMessage(codeWord, '*');\n  };\n};\n","\nexport function test() {\n  if (global.setImmediate) {\n    // we can only get here in IE10\n    // which doesn't handel postMessage well\n    return false;\n  }\n  return typeof global.MessageChannel !== 'undefined';\n};\n\nexport function install(func) {\n  var channel = new global.MessageChannel();\n  channel.port1.onmessage = func;\n  return function () {\n    channel.port2.postMessage(0);\n  };\n};\n","\nexport const test = () =>\n  'document' in global && 'onreadystatechange' in global.document.createElement('script');\n\nexport const install = handle => function () {\n\n    // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n    // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n    var scriptEl = global.document.createElement('script');\n    scriptEl.onreadystatechange = function () {\n      handle();\n\n      scriptEl.onreadystatechange = null;\n      scriptEl.parentNode.removeChild(scriptEl);\n      scriptEl = null;\n    };\n    global.document.documentElement.appendChild(scriptEl);\n\n    return handle;\n  };\n","export const test =  () => true;\n\nexport function install(t) {\n  return function () {\n    setTimeout(t, 0);\n  };\n};\n","import * as setImmediate from './async/setImmediate';\nimport * as postMessage from './async/postMessage';\nimport * as messageChannel from './async/messageChannel';\nimport * as stateChange from './async/stateChange';\nimport * as timeout from './async/timeout';\n\nvar types = [\n  setImmediate,\n  postMessage,\n  messageChannel,\n  stateChange,\n  timeout\n];\nexport default function (drainQueue) {\n  for (let type of types) {\n    if (type.test()) {\n      return type.install(drainQueue);\n    }\n  }\n}\n","class CancelToken{}\nfunction throwStuff(e) {\n  throw e;\n}\n// v8 likes predictible objects\nexport class Item {\n  constructor(fun, array, list) {\n    this.fun = fun;\n    this.array = array;\n    this.token = new CancelToken();\n    this.prev = null;\n    this.next = null;\n    this.list = list;\n  }\n  run() {\n    const fun = this.fun;\n    const array = this.array;\n    switch (array.length) {\n      case 0:\n        fun();\n        break;\n      case 1:\n        fun(array[0]);\n        break;\n      case 2:\n        fun(array[0], array[1]);\n        break;\n      case 3:\n        fun(array[0], array[1], array[2]);\n        break;\n      default:\n        fun(...array);\n        break;\n    }\n  }\n  cancel() {\n    const next = this.next;\n    const prev = this.prev;\n    if (next === null) {\n      if (prev === null) {\n        // only thing on list\n        if (this.list.head === this && this.list.length === 1) {\n          // sanity check\n          this.list.head = this.list.tail = null;\n        } else {\n          return;\n        }\n      } else {\n        prev.next = null;\n        this.list.tail = prev;\n        // tail of list\n      }\n    } else {\n      if (prev === null) {\n        // head of list\n        next.prev = null;\n        this.list.head = next;\n      } else {\n        // middle of list\n        prev.next = next;\n        next.prev = prev;\n      }\n    }\n    this.list.length--;\n  }\n}\n","import {Item} from './item';\n\nexport class List {\n  constructor() {\n    this.length = 0;\n    this.head = null;\n    this.tail = null;\n    this.cache = new WeakMap();\n  }\n  push(func, args) {\n    const item = new Item(func, args, this);\n    if (this.length > 0) {\n      const currentTail = this.tail;\n      currentTail.next = item;\n      item.prev = currentTail;\n      this.tail = item;\n    } else {\n      this.head = this.tail = item;\n    }\n    this.length++;\n    this.cache.set(item.token, item);\n    return item.token;\n  }\n  shift() {\n    if (this.length < 1) {\n      return;\n    }\n    const item = this.head;\n    if (this.length === 1) {\n        this.head = this.tail = null;\n    } else {\n      const newHead = item.next;\n      newHead.prev = null;\n      this.head = newHead;\n    }\n    this.length--;\n    this.cache.delete(item.token);\n    return item;\n  }\n  cancel(token) {\n    const item = this.cache.get(token);\n    if (item) {\n      this.cache.delete(token);\n    } else {\n      return false;\n    }\n    item.cancel();\n    return true;\n  }\n}\n","import creatNextTick from './nextTick';\nimport {List} from './list';\nconst list = new List();\nlet inProgress = false;\nlet nextTick;\nfunction drainQueue() {\n  if (!list.length) {\n    inProgress = false;\n    return;\n  }\n  let task = list.shift();\n  if (!list.length) {\n    inProgress = false;\n  } else {\n     nextTick();\n  }\n  task.run();\n}\n\nexport function run (task, ...args) {\n  const token = list.push(task, args);\n  if (inProgress) {\n    return token;\n  }\n  if (!nextTick) {\n    nextTick = creatNextTick(drainQueue);\n  }\n  inProgress = true;\n  nextTick();\n  return token;\n};\nexport function clear (token) {\n  return list.cancel(token);\n};\n"],"names":["global","self","window","browser","test","process.browser","setImmediate","install","func","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","codeWord","Math","random","globalMessage","event","source","data","addEventListener","attachEvent","MessageChannel","channel","port1","port2","document","createElement","scriptEl","onreadystatechange","parentNode","removeChild","documentElement","appendChild","handle","t","types","messageChannel","stateChange","timeout","drainQueue","type","CancelToken","Item","fun","array","list","token","prev","next","length","head","tail","List","cache","WeakMap","args","item","currentTail","set","newHead","delete","get","cancel","inProgress","nextTick","task","shift","run","push","creatNextTick","clear"],"mappings":"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"}